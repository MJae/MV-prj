<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8"/>
        
        <title>Rock, Paper, Scissors</title>

        <script>
            function computerPlay() {
                // Return a random integer between 1 and 3
                let computerChoice = Math.random() * 3;
                if (computerChoice >= 2) {
                    return "rock";
                } else if (computerChoice >= 1) {
                    return "paper";
                } else {
                    return "scissors";
                }
            }

            function playRound(playerSelection, computerSelection) {
                playerSelection.toLowerCase();
                let paper = "paper";
                let rock = "rock";
                let scissors = "scissors";

                if (playerSelection == computerSelection) {
                    // return "It's a tie!"
                    return "tie"
                }

                if (playerSelection == rock && computerSelection == paper || playerSelection == paper && computerSelection == scissors || playerSelection == scissors && computerSelection == rock) {
                    // Computer wins
                    // return "You Lose! " + computerSelection + " beats " + playerSelection
                    return "computer";
                } else {
                    // Player wins
                    // return "You Win! " + playerSelection + " beats " + computerSelection
                    return "player";
                }
            }

            /**
            const playerSelection = "rock";
            const computerSelection = computerPlay();
            console.log(playRound(playerSelection, computerSelection));
            **/

            function game() {
                let playerScore = 0;
                let computerScore = 0;
                let numRounds = 0;
                let maxRounds = 5;
                
                let playerSelection;
                let winner;

                while (numRounds < maxRounds) {
                    playerSelection = window.prompt("Rock, Paper, or Scissor?")
                    const computerSelection = computerPlay();

                    winner = playRound(playerSelection, computerSelection);

                    if (winner == "player") {
                        playerScore++
                    } else if (winner == "computer") {
                        computerScore++;
                    }
                    
                    console.log("player: " + playerSelection);
                    console.log("computer: " + computerSelection);
                    console.log("player score: " + playerScore);
                    console.log("computer score: " + computerScore);

                    numRounds++;
                }

                if (playerScore > computerScore) {
                    console.log("Congratulations! You won!");
                } else {
                    console.log("You lost.");
                }
                
            }

            game();

        </script>
    </head>

    <body>

    </body>
</html>